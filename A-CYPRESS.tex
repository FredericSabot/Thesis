\chapter{Work performed in the framework of the CYPRESS project}
\label{ch:CYPRESS}

\textbf{Note:} Due to time constraints, this chapter is basically empty. I however performed some work in the framework of the CYPRESS project which has not (yet) found a place in this thesis. This work also led to a publication attempt. This will be discussed in more details during the oral presentation.

\section{CYPRESS project description}

The energy transition leads towards smarter electric power systems taking the form of cyber-physical systems in which the electrical power grids are strongly interlinked with a growing number of information and communication systems. The project aims at developing novel knowledge, methods and tools needed to help ensuring the security of supply through the transmission grid, while accounting for the specific nature of cyber-threats and integrating them into a coherent probabilistic risk management approach.

\section{Co-simulation}

To be expanded.

\TODO{Say co-simulation can be fast but require good implementation, stop and restart (e.g. PowerFactory) is too slow. Give some ideas of how I did it in Dynawo. Responsibility of the tool developers.}
% Time-stepped vs event-based. Event-based requires simulator to know when is its next step. Cyber simulator knows the next step, but not the next step of interest (next step is message arriving at next router, but does not know yet when will arrive at the router connected to the power system). Power system does not know the next step.

% Rollback usually not possible for both (can save system state (costly if often), but no reverse time operation (need to implement reverse operations in each model of the network simulator)).

% \section{CYPRESS email (to reformulate)}

% Time management

% Also master-slave if know in advance the events in one simulator (e.g. elec only creates PMU messages).

% There is two main ways to manage time in a co-simulation: time-stepped and event based (see previous presentations). Dynawo can only be used in time-stepped mode for the following reasons:
% \begin{itemize}
%     \item Dynawo cannot say in advance when will be its next step/event. This is because the next event is determined by zero-crossings/time step variations which are known only after solving the DAEs. (It could be possible to do an event-based co-simulation with Dynawo but that would require modifications closer to the solver, and defining Dynawo as the master or implementing rollback capabilities)
%     \item As an event-based simulator, ns-3 naturally knows its next time step. However, it does not know its next “interesting” (from the co-simulation point of view). To give an example, if Dynawo sends a message to ns-3, message that goes through a few routers, then is sent back to Dynawo, the next “interesting” event, is when the message goes back to Dynawo. However, in the event queue of ns-3, initially the only event is “Dynawo message sent to first router”. Then, when ns-3 process this event, the “message sent from first to send router” event is created. Ns-3 thus have to go through all these events (stopping the co-simulation each time) before arriving at the “interesting” event. This would be very inefficient especially for large systems (in my PSCC-submitted paper on the sharepoint, I give an order of magnitude for the number of events created).
% \end{itemize}

% So, in my example, Dynawo stops every 1ms to read and write values. Ns-3 is event based (but Helics allows to continue without stopping for synchronising except every 1ms when Dynawo asks). The PMUs in ns-3 only read the values published by Dynawo every 20ms, but Dynawo still reads/write every 1ms to be able to react quickly when ns-3 sends it a message (e.g. control action decided from the PMU measurements). (It is a bit inefficient for Dynawo to publish every 1ms when ns-3 only reads every 20ms, but not that much. It could be possible to only sends those measurements every 20ms (while still stopping Dynawo every 1ms) but I don’t expect a significant performance gain. Also, there is a functionality in Helics to only publish data when it significantly changes.)

% \section{Computation time}

% Seems ok for relatively short simulations. Network simulators cannot use ``long time steps".


% \section{More efficient co-simulation (not sure to include this)}

% PSCC/MSCPES paper. And discuss issues with this paper?

