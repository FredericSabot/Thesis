\documentclass[a4paper, dvipsnames, twoside, 11pt]{report}
\usepackage{caption}
\usepackage{subcaption}
\captionsetup[sub]{font=normal}
\usepackage{minitoc}  % Should be loaded before hyperref
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\setcounter{minitocdepth}{4}
% \usepackage[utf8]{inputenc}  % Not needed with lualtex
\usepackage[nomarginpar, headheight=10mm,
  margin=2.5cm]{geometry} % For cover page and fancyhdr
\usepackage{eso-pic}
% \usepackage{fullpage} % does not work well with fancyhdr
\usepackage{amsmath}
\usepackage{amssymb}
% \usepackage{cite}
\usepackage[style=ieee, maxnames=6, sorting=none, backend=biber, citestyle=numeric-comp]{biblatex}
\usepackage{csquotes} % recommended by biblatex
\addbibresource{bib.bib}
\usepackage[bottom]{footmisc} % Avoid float below footnote
\usepackage{mathtools}

\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%

\let\oldfootnote\footnote
\renewcommand\footnote[1]{%
\oldfootnote{\hspace{1mm}#1}}

% bstctlcite
\makeatletter
\def\bstctlcite{\@ifnextchar{\@bstctlcite}{\@bstctlcite[@auxout]}}
\def\@bstctlcite[#1]#2{\@bsphack
  \@for\@citeb:=#2\do{%
    \edef\@citeb{\expandafter\@firstofone\@citeb}%
    \if@filesw\immediate\write\csname #1\endcsname{\string\citation{\@citeb}}\fi}%
  \@esphack}
\makeatother

\usepackage{bm} % Bold math
\usepackage{xcolor}
\usepackage[british]{babel} % English defaults to American (for dates in refs, etc.)
\usepackage{lmodern} % Euro symbol

\usepackage{pgfplots}
\usepackage{pdfpages}
\pgfplotsset{compat=1.18}
\usetikzlibrary{pgfplots.groupplots,shapes,arrows,chains,fit,backgrounds}
\usepgfplotslibrary{external} % Increases compilation speed
\tikzexternalize[prefix=tikz/, optimize command away=\includepdf]
\usepgfplotslibrary{fillbetween}
\pgfplotsset{every axis plot/.append style={line width=1pt}}
\usepackage{circuitikz}

\usepackage{booktabs}
\usepackage{multirow}
\usepackage{tabularx}
\newcolumntype{s}{>{\hsize=.25\hsize \raggedright\arraybackslash}X}
\newcolumntype{B}{>{\hsize=.5\hsize}X}
\newcolumntype{Y}{>{\centering\arraybackslash}X}

\usepackage{url}
\usepackage{lscape}  % Landscape, but keep default orientation of landscape pages to vertical (easier scrolling), pdflscape auto rotates
\usepackage{afterpage}
\usepackage[most]{tcolorbox}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{adjustbox}
\usepackage{IEEEtrantools}  % for IEEEeqnarray
\edef\restoreparindent{\parindent=\the\parindent\relax}
\usepackage[skip=5pt plus1pt]{parskip}
\restoreparindent
\usepackage{bm}
\usepackage{mathrsfs}
\usepackage{microtype}
\tolerance=5000

\usepackage{fancyhdr}

\usepackage{silence}
\WarningFilter{minitoc(hints)}{W0023}
\WarningFilter{minitoc(hints)}{W0024}
\WarningFilter{minitoc(hints)}{W0028}
\WarningFilter{minitoc(hints)}{W0030}


\PassOptionsToPackage{hyphens}{url}\usepackage[hidelinks, bookmarksnumbered]{hyperref}
\usepackage{hypcap} % fixes hyperref link with two captions in a single table
\usepackage{bookmark}

\newcommand{\Dynawo}{Dyna\(\omega\)o}
\newcommand{\ie}{i.e.\ }
\newcommand{\eg}{e.g.\ }

% Packages/def to only use in draft mode
% Add disable to todonotes options for final version
\setlength{\marginparwidth }{2cm}
\usepackage[colorinlistoftodos]{todonotes}
\makeatletter
\renewcommand{\todo}[2][]{\tikzexternaldisable\@todo[#1]{#2}\tikzexternalenable}
\makeatother
\newcommand{\TODO}[1]{\todo[inline]{TODO: #1}}

% \includeonly{Cover, 0-Abstract, 1-Introduction, 2-Security, 3-Protections, 5-Distribution, 6-DPSA, 7-Conclusion, 4-SPS, B-Cosim}

% Note: can create diff with
% latexdiff-git --flatten main.tex -r HEAD^1
% and compiles to pdf with
% latexmk --enable-write18 --lualatex -output-directory=tmp main-diffHEAD^1.tex

\begin{document}
\dominitoc
\bstctlcite{IEEEexample:BSTcontrol}

\include{Cover}

\include{0-Abstract}
\include{0-Acknowledgements}
\tableofcontents


% % \setlength{\headheight}{30mm}
% % \addtolength{\topmargin}{-30mm}
\pagestyle{fancy}
% %... then configure it.
\fancyhead{} % clear all header fields
\fancyhead[LO,RE]{\textsc{\nouppercase{\leftmark}}}
\fancyhead[LE,RO]{\thepage}
\fancyfoot{} % clear all footer fields


\include{1-Introduction}
\include{2-Security}
\include{3-Protections}
\include{5-Distribution}
\include{6-DPSA}
\include{7-Conclusion}

\appendix

\include{4-SPS}
\include{B-Cosim}

% \bibliographystyle{IEEEtranURLdate}
% \bibliography{bib}
\printbibliography[heading=bibintoc, title=References]


% \let\clearpage\relax  % Don't end on a blank page

\end{document}
